"""
AILinux MCP Client - Embedded Certificates
==========================================

Zertifikate für mTLS-Authentifizierung zum MCP Server auf Port 44433.

Verwendung:
    from .mcp_certs import get_ssl_context
    
    ssl_ctx = get_ssl_context()
    async with aiohttp.ClientSession() as session:
        async with session.ws_connect(url, ssl=ssl_ctx) as ws:
            ...

Generiert: 2025-12-27
"""

import ssl
import tempfile
import base64
import os

# === EMBEDDED CERTIFICATES (Base64) ===
# Client Certificate + Key (für mTLS Auth)
# Generiert: 27.12.2025 auf api.ailinux.me
_CLIENT_CERT_B64 = """LS0tLS1CRUdJTiBQUklWQVRFIEtFWS0tLS0tCk1JSUpRd0lCQURBTkJna3Foa2lHOXcwQkFRRUZBQVNDQ1Mwd2dna3BBZ0VBQW9JQ0FRRE5NQjRTMTNkYkMybDEKZ1FFVnFHZEphNGQ0aG1WQ3ZsOE9QMFBlOGxhdWxEb0JUVzJDZ25UWFpDYkRCZzJBakRoTm1Kc0N1S0hUcmFBWQpVMkl3bHNRYXdFUzJIQml5K3dZdWFHMUtuWmtjMDdtQWVvc05NRUNuTVpCU1BoUXVuS202dWg2em12akdYWXNMCkdLeVpoTFNVTE5XTm5kaGZqZE04T0NlZEpNdFIwUjVBaC9MM0RhMFpnVFZCelkrTzdDQ1lzVmRMVDBhbHpyRTkKSkl0bjZKbmc1QUw5c2lkTXhZekRFMm1ld1J5R1NyUWNobGpWdm9kdVlPVVQwTDUyMm9MZC8vUjhMNWNRcDdPaApQcUxtcXA3Mi9RdVdITlNQQXo1VGhsYS95bEkyYjRjblNRMmdvRHNpSXFDNHVlZENiWjJURkJqdEEzcFJUNUxVCkh2RjJxcVJGSyt3TjVxTFAwQlozMnJBL21VYStGWnVxdVhSV2w3NU1RZWw2ZXlKamZhR1o4REovaDRpbEZhTUIKUnEwOWxqS2I3OXVlam04bGp1THoyQklVb05OQVJtcXpNQ2JHbHYwQmlMUkpidXBONmNPbEFhSzR3Snc5eHJqQQpKay9jU3ZBS2hUNTZMZzJUY0JFbnYrQVVsQUFYcE1sb25SOVRNZ2lqaHZ1WWxjTHltWms3TGoyNER1aHJBOHNCCnVhL1krMmFreisrS0VUaGtjSVEvSzBNdDJMWUg0d0ZDbjNqKy9kTTBscjNRdUtBZDZFZlVuZXBXeDlSTVd5ZDQKQk45eTFRL05BSHNybVVzbS8xMm5uVXdPaXVCcEhPZEpKRERGak1YK3lXY3Z0Q0dBak8yT2tTazlsK0pCMHJPRgpmc3hSblNBa3p2aVRDbjFYZFAyU1pJR0U0ZGZycVFJREFRQUJBb0lDQUFLVnBCTlZybld4bjVyd3pJd3l5bFpFCjZmaHRMUEpaeG9XOTYwTndKd0pjOEp3YWx4SUpSYUorNnZRUzYvR2VFb2w3cmh3cktqS3A0YlhjdXdSa3FjU3kKZmtzUzhJYTBuYi9RNWV1R0w2c0t5YS9pRzBWSHdkQzVVWm1QbVo1NnI3S2Y3SW9UbmlXVmdRNWJPYlZYVkJUMwp1WnJtalphcWlTb2RoUFk0USsxY1puYW1uN3RYNjBIQ2ZHSy9UWnNkdzAxWkVvSHExamQ1Y29jVUlrTmxUU2JsCmlGb2N0OTBDTWdNMUIrUU5oNmZ6WWZCb0NzOXFibmRIOWlxNU91VHhYS3VpTVRpdE9zaGxiR0JRRXlvM3BQZjAKZVFSamlaUGhsUlBsUWN0NXAyNXpHaTgyL3RweW1qd1VWcFR0Rm9vaUtsVnpiOXJ3YThhQmE1YUxhencwNnd2RQpOWm9nbXB3bVUvdVZUbFA0RGJ6bmdmdmlMU3RWdE9lM3hURUxTM0YwTStPRmZVeDhaZmRnSTNKZlJIMW9jTHVPCldiLytkYWUyeWhSTlU0U2h3YTZGZEdmc1NZbit1T09CUHU1ZlZwRTRQU1JXb1BMT1U1dHFCNlpaN3VXWDhYOHUKVkdrU1g3K3lQSlRtclhPdWlFZEtCaVFvUVVIcnpnR3pjY2ZWR3ltbElNM2FrOFNHbGJSNG1DZnFIR0JVaVZXSwpxWjZTbXR5MHhDbW5LZUdyWFliTW9KeXVTM3Y4UVFWZ0lRQVQ0ODFveEdaUVpKWTR0NjMvV01HYzdkYlQ5WGpoCmVBVTFzQjhHeVpyZ3RjOU5LS0FCRGlmWjRVLy9mS3hkS3ZCeGdDY2FZVHJINDRZSVR3dkxmeEJhajEzOHJseEUKOEUrZC9ZNTV0S2NKb00vWVNVc0JBb0lCQVFENko3aGNiTG1YSG80SHNuK00wSzhDSlRMcUd4aVhESEc5NzU4UApJSGM3MGJRc1k1SlV0SFE5bzFFTnJiYVIxSTh0UkR2Zm9Ibi9zSUowbzNkL042OWhndzNJMmY4NExXNWt4Vkt4ClVPbk4vUkMxQ21kMFh0OEFLald3OGYrMEwwYUlOMWJId1BCV09BQ1ozQXVLWFlibUZuNWxrY1U2NW9tSXR2cEYKUmxOQ0tBOThML1ZTZ1ZxeWJFeS9jODMzK2haVktnYldTQ2VlNzFUMEJ3c1N1T3BSU21iYUYydmdxcWlmc2R2NApVS2x3cXFxaXk5K2k5cUtVM0xFZjMxY2VZdWlPNENWaXZHcGc3eGZHMjg5Ykw2NG1MSlZMOUsvWGZPcVdkWTNJCjRpS25GaU9ZeXNxNnJGT0Rxa2VteVdHY053R2JvU3VraGFxbWNDdktOMWpGWkx0QkFvSUJBUURSKzI0aFVadS8KRFZhOWR6cmtGUUdDaE1SYjBIcGJ5MDV4dFJHeVFLVGlwOUs3QnBtUHVTQTRXRGtTYm42Q3NoZVduWHNkNy9Rawp2SklpaE16Tng0UWpHd0lSYU9sbTZPOE1Pc0FUck1GYnM4c2JDdXpqNmJneml0czN1MXBqM2JrSWVVcUtlOEM0CnNqRFdOT3dMK1NTVGRaeHBDdkVISUdUbXRIdnRRR0haUGJKNk1nTWhiYmJCdjA0WGMwTUVKZnN0Q2FvOE12aU4KdFFsdnFrZEtXTnZHN1RBbXRNRHY0UzRiMVhkL3NFWHRyQVk2R21YK1NZUStFcWlaei9YeE1hdmR0aHFkdVNmeQpicXBvNk9ERUdtM1lJaWVwVzBvR1U5TDRGVUxqSjV4Z085aG5jMmZvTWdXMWtxdEdwM0JnVVlHeFlOaFhma2FLCjZGZ1laZStidFo1cEFvSUJBRGgvMUNINzVJYi9QYkQ3WGRlZUlvam5nZkppSUZHdFc5czhUYjZLNUtNOEgrZU8KcmJRMzliRWVPK1pNLzlrOEd3SnNVT0dYU3phMjFTQW04NHhtTlZSZTF6UXdHSGJGdkJOQ2hnVEtjNlEwcmh0Vgp1RHdPV1d1ZUhQWlVFaDdPTnEzNVliNUlFNEJGc2MwT2FBVGVUdU9VM1FOdnd3NGtsNWVyVENkdFZNeXlZNXoyCjcvK3NlNkdrMkVpOWpSMmUvSUJMdDdPYUpHaS9RWDdFUUhvQURkeENZNnlLY2JFU21uZEhJcG1aRGt3R0gvZ1kKOSsvRXFML2FnSjdrUUxiNk8vQlpLOWg3R2NPKy9LM0xZN0FDdXVDZ1hUQUVtZHFmdWhRMWhNcUVXTE5JU3MzdApyNUF0NzhiakpML0U2Q2p5TzRpOUJEQnFpRHFEUjBDcTgzL1Iyb0VDZ2dFQkFNWDVOUXNxNHhtTTNQUURIcjM5CjVBK0hWNDV0RDMvT1BlWk0zaU5lZVZiTS9ZeWhtMVI3S1JxV2F6Q3FocEo0a0c3TGlWRmZjNkxUTzBCYVRySFEKNHc4cUhwZ0ZmdEVzMm55QVE2b0pIY0IwMGhCc0M0NlNRNzRzczZSbStzRGZRZDN3WlV3TmcxVmZnMVhpVFk2NApWampGRVRPa1FqMEMyTDcrK1R4bGtCdCs1Ty82aVNNU1N0VitwWVRNZ2ltK0dZT0w4am1Sb1BBUitKU1VTV1NhClJKUFgrcWJ6a2xoWHlONHJNK0JxZEhPeDFha2dUSHNrR3c5ZkRpRCtoaFhpUy9UY0JWb2hRTDE4Z3lRb05Bb1EKRlBKS3VYUWVBcnZXZWppMTZ2czUxR0NTNitRVlZha0F5SXM1Zmt3OS8yQ0FXRFBCYUJlTmticlRkb09DVUJkUgpjOGtDZ2dFQkFMbmt0dFRjb0ZLaUIwT0t1c0JkOWkvZ0xuVFF1WC9Ic2s5L1ViQ2U5YUt1NmZHcUNYT0RnMjBXCnBLbFpxN3NlcUpVbHEzK2M3WkVFai9SYXV2S05jUWU4NURGVENvS2ZVT2diZ0s5YlUva0JWaDY4WS9aZFlOOEwKSnhMcXlFOWdweUJlYVE0Z29YL2JXR1VmZ3hubGJvUEZsd2F4cm1Jc0F6Ly9rcm1MZ2Q3Rnk1VE0wS1FnbUpKdQpHWHVxYmpNY2pVNXNmUlpoa1l0cHhaaVIyYzJJNjVqRDN2aFcrOWlJWkp1UEVVcFFEdGFUSEdPNXYzcXBGWUFkCnIwSFFxZTRBbDJ0WVJLaUtsOE0wejI5SnUvOUNBQityQ05Lc25NdGRkajhDRUhHOTRYUXZ0RWpMREhRRDNHbVUKTFkvdzFZSlBUZEpJQ09kV2FhMUNVR0dqQ3kzSE16bz0KLS0tLS1FTkQgUFJJVkFURSBLRVktLS0tLQotLS0tLUJFR0lOIENFUlRJRklDQVRFLS0tLS0KTUlJRlpEQ0NBMHdDRkUvcjNraEdGZ29iVlZRYzhHZ2RFTkFXcHdxMU1BMEdDU3FHU0liM0RRRUJDd1VBTUcweApDekFKQmdOVkJBWVRBa1JGTVJBd0RnWURWUVFJREFkQ1lYWmhjbWxoTVJNd0VRWURWUVFIREFwWFlYSjZaVzV5CmFXVmtNUkF3RGdZRFZRUUtEQWRCU1V4cGJuVjRNUXd3Q2dZRFZRUUxEQU5OUTFBeEZ6QVZCZ05WQkFNTURrRkoKVEdsdWRYZ2dUVU5RSUVOQk1CNFhEVEkxTVRJeU56QTFNVGsxTTFvWERUTTFNVEl5TlRBMU1UazFNMW93Y0RFTApNQWtHQTFVRUJoTUNSRVV4RURBT0JnTlZCQWdNQjBKaGRtRnlhV0V4RXpBUkJnTlZCQWNNQ2xkaGNucGxibkpwClpXUXhFREFPQmdOVkJBb01CMEZKVEdsdWRYZ3hEekFOQmdOVkJBc01Ca05zYVdWdWRERVhNQlVHQTFVRUF3d08KWVdsc2FXNTFlQzFqYkdsbGJuUXdnZ0lpTUEwR0NTcUdTSWIzRFFFQkFRVUFBNElDRHdBd2dnSUtBb0lDQVFETgpNQjRTMTNkYkMybDFnUUVWcUdkSmE0ZDRobVZDdmw4T1AwUGU4bGF1bERvQlRXMkNnblRYWkNiREJnMkFqRGhOCm1Kc0N1S0hUcmFBWVUySXdsc1Fhd0VTMkhCaXkrd1l1YUcxS25aa2MwN21BZW9zTk1FQ25NWkJTUGhRdW5LbTYKdWg2em12akdYWXNMR0t5WmhMU1VMTldObmRoZmpkTThPQ2VkSk10UjBSNUFoL0wzRGEwWmdUVkJ6WStPN0NDWQpzVmRMVDBhbHpyRTlKSXRuNkpuZzVBTDlzaWRNeFl6REUybWV3UnlHU3JRY2hsalZ2b2R1WU9VVDBMNTIyb0xkCi8vUjhMNWNRcDdPaFBxTG1xcDcyL1F1V0hOU1BBejVUaGxhL3lsSTJiNGNuU1EyZ29Ec2lJcUM0dWVkQ2JaMlQKRkJqdEEzcFJUNUxVSHZGMnFxUkZLK3dONXFMUDBCWjMyckEvbVVhK0ZadXF1WFJXbDc1TVFlbDZleUpqZmFHWgo4REovaDRpbEZhTUJScTA5bGpLYjc5dWVqbThsanVMejJCSVVvTk5BUm1xek1DYkdsdjBCaUxSSmJ1cE42Y09sCkFhSzR3Snc5eHJqQUprL2NTdkFLaFQ1NkxnMlRjQkVuditBVWxBQVhwTWxvblI5VE1naWpodnVZbGNMeW1aazcKTGoyNER1aHJBOHNCdWEvWSsyYWt6KytLRVRoa2NJUS9LME10MkxZSDR3RkNuM2orL2RNMGxyM1F1S0FkNkVmVQpuZXBXeDlSTVd5ZDRCTjl5MVEvTkFIc3JtVXNtLzEybm5Vd09pdUJwSE9kSkpEREZqTVgreVdjdnRDR0FqTzJPCmtTazlsK0pCMHJPRmZzeFJuU0FrenZpVENuMVhkUDJTWklHRTRkZnJxUUlEQVFBQk1BMEdDU3FHU0liM0RRRUIKQ3dVQUE0SUNBUUJlczBvb0RTa1hWbkhKajB1K3J4QjFSS3hsYVNHdTE5SWJQR0Q0dGNEcTFUcmRpZGNUQlhLWgpGR1EzeWdId1MxNjJ6VlkraEMwMnJpT0txQUREcWZScVhybStyanNHTWkzdWJpRlFBWVJnWEZiVGtlNFlKSEljCldBcWVnYmtYSkhOdnY3M0k5N1pTWGIwSko5ajJwVmNYVUQxN0NWVEM2cmM2Wm0xT3Bwd3E0a0pLYzUyTkFsRWcKQnpZZTkzaVJmWjQ0bHNoOWtZMEhBQzdsTnFjZ3RBZ2RQR0JaSG9VdFJxTVJCMzBEbnpKTmJsUW55VG1UYis0dQpYYnNRVG80M1NYcENsTzlUVDdEdEJRRjMwbExTUjRQRDlBQ3dHQjBJQVlkS0s2MVBBYVlEQ2xaa0VmSEp6V0ZaCllxOGdFUmRZZE1LQmN0YXlFeks4ckpWL2d5S1FHcXhPdkR6azVGdURDTFZaeEgxR0wweEZMSVVaOGxUL1JQVTkKMm9BU25SM0pxUEJQRWZtdVhwZWovTm9DTXBxcTR6cUxqSUdTTWhGeW5GZ2ZHNDBQczBHUTdlYnBqd3AyTHdaZwpQeDY2bnR1aFY1d2hpc1A1Y0xVSkVWSEtDanphOFFGUE5JWGFMN0liTlU4M1hwV0o5QStEZ3dURWJ1cWNYdHBWCjBIYU9LL2dUQTlkNnJWTGl6aWQ0K2taR3NFRHpPYUR2UTdkQjlTMk1mVUJQZ0IyZGZtQjl4bFVmOG5JRXJSaUoKbFZWLytqNk0ySVo4K0lkeVVtR0hHSFRzd2d5RGR2amNacWZLUDdxQXFqb2JPREtuaEhXaGk3VXNRRWFUOTYxWQpsUTRYNkRsaVRsRTdpWTEwZHloQnZOd2pXLzhrVVpSenU4ZklSVUxkRHRxQkF6eC93WVpPMUE9PQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg=="""

# CA Certificate (Server-Verifikation)
_CA_CERT_B64 = """LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUZ1ekNDQTZPZ0F3SUJBZ0lVV2JrN2xFbC90VUVkTkVDWVJESTlsZmo0TTYwd0RRWUpLb1pJaHZjTkFRRUwKQlFBd2JURUxNQWtHQTFVRUJoTUNSRVV4RURBT0JnTlZCQWdNQjBKaGRtRnlhV0V4RXpBUkJnTlZCQWNNQ2xkaApjbnBsYm5KcFpXUXhFREFPQmdOVkJBb01CMEZKVEdsdWRYZ3hEREFLQmdOVkJBc01BMDFEVURFWE1CVUdBMVVFCkF3d09RVWxNYVc1MWVDQk5RMUFnUTBFd0hoY05NalV4TWpJM01EVXhPVFV6V2hjTk16VXhNakkxTURVeE9UVXoKV2pCdE1Rc3dDUVlEVlFRR0V3SkVSVEVRTUE0R0ExVUVDQXdIUW1GMllYSnBZVEVUTUJFR0ExVUVCd3dLVjJGeQplbVZ1Y21sbFpERVFNQTRHQTFVRUNnd0hRVWxNYVc1MWVERU1NQW9HQTFVRUN3d0RUVU5RTVJjd0ZRWURWUVFECkRBNUJTVXhwYm5WNElFMURVQ0JEUVRDQ0FpSXdEUVlKS29aSWh2Y05BUUVCQlFBRGdnSVBBRENDQWdvQ2dnSUIKQUxYUXpQbTBhdE8vZzZtT0VRNUNwV203RWovVitaZlBhcXBxU0M3WVJRZlJtOEhrMVNLMnRKcUc3NDhlVHZSWQp6MW10RmljNzZLeHRYaTVkditlbUx2ZWtMUFFGdG5sbnkvM2xjdkhIQ1k1VTVGOXhpVm1XZGhQaldWTjNUWm9GCkxXSGxJUE5rM1hNWmtDQWx4TVNSRHlPZCtCaFQ1dFE0NDJVOXE5NEMrU25uR2dTUkhkTmQ2OGpnRnRsZHFJMGEKNmxaektpWnRZNis1ekc5UDNyQmNkcDgxSGNybmtnV2RtZmhqMUtUZ2RycGI3ZmJNd0IxeTZuOHIyMU9hUzloawpKNWFsQXRZTjl2NTJDZXExNzRudm9XcDNGWWRZYlVBYnIyM2Y3am1TV092MUJZS0x5MjU5c3I1cS95R2txeFd2CmR0R2tpOHpXUmxzcHFPb3BORE4zSVd4eEkrR0JUcU12WGxaM2twYWYySmVRTlp2Tml1c0Nxb25kS25PdlN5WW8KRXdxeHF5MXpHNkJVY1RQaktrRlVRRml5b1lZdlNPUU1HVCtwc2Q4VFFGQjZRQ1FpcTFUYkdGeFVNWmJXVmQ1Mwp5VWZuNVJONXlWa2VxWWxiUHV0TDdXRjBUamVBR2Y4cGw4MkNXMmw1UjRnUE1qNWQvdGFWQ1BKa3pCU1JYLzE5CnVRdkNxRVI1cmZIbW5vTWlqbG1JTk9xZnh3RHV1Y3NHNEwrK1BrYmExM0E3ZmhCNlRNSUxnSmdlMUNvMEtDWTAKWjBlSEJ4aDJsMUtPK3dZOThZS29HdlZpTHBta3d4SUxSTjNtSE5HSldGMytrNmNUV0ZoeTlXZWd1UFczL2lUNwoyaVdrL0lUcDdLQjhUdXBTcFFFODlKNGRNL0lwajVTS3hkNTRrTG1Cc1V6VEFnTUJBQUdqVXpCUk1CMEdBMVVkCkRnUVdCQlJxK0VmcktVM2loYW1DTlNHR1RqbzV3UW56cGpBZkJnTlZIU01FR0RBV2dCUnErRWZyS1UzaWhhbUMKTlNHR1RqbzV3UW56cGpBUEJnTlZIUk1CQWY4RUJUQURBUUgvTUEwR0NTcUdTSWIzRFFFQkN3VUFBNElDQVFCUApuTGo4SmZ4N1JnUlFtMkFjMXdRRUNyc0FRL09NdVBad2F4UVFyYi9BTmJHblNmK01kNHRVcHJRUk5NTTVvU01MCktUV01jREpvaHFBZzlBZ29GUmxEakxTWCsxQjJSQnhsMUE2YlBLWGlCME85c2VFeVZpRnRldC9QRExCVVUwSWoKNnJMb2syMFpwT2xUdEhzR3pITnlWSGoraENFdGE4Q3htVGhlaVl3K0tHNzdiSlI1TzdvU0xRbG1ZdTVoZXlHZgphaDNKOTk2S1FlMUNPdDBiTmZabkF0Z0JUb1JUOTkrYThveElMR05DR01yQXpkelJ4RXlZZnYzNkRPazBDQ284CmQwWUtkZUFNdDBFNFd4bVYxNlM2RmxwcktuYTNkWkN2dlBXb2QrczRqdkV1ZWNZeFhSa1F6Vk9RVTV0U011RlMKaXhzZm5BbENMZzlaOGVrenJlaVNHbWJGTmVKeGFkRWluZDVMMWllMGtRQlJWTUdwT016cEN4SFdvcWNQNXJnawo3ZVpFNm93SndmYXRjeTY3NVpCRHRWRHRYTkVJTXNDMEpydEZPQU5PazlsTEkwaTZUN3plYk1QUGJERDcveVY2CjNabEVrQzZGSE5BNjBpMVJFZEFRZmQzQ2VnNnVLTUJrSkZhbk5ldGc4bHdXOEhtLzNtV1h4U0NwMWlsOE9vdWEKdVN6VzNIV1FtTklUVWZyUmRnSHAvbFZyRXYvd3dzbWc0cVFuV1k3MzdtY2hsMDgxVkNPK2hmSHNKbThnY3h1bApxaGpMajh4c2Q4SE5KSFdOSS9lTm92V1pHUksrRE1KWW9RQjF2Zm5VcWZoWmtKMk5oY3o0K0dxM3VweHlBQjhrCktiOHpEc2VSc2YvNnRSeC9QRWtHai9BSEtMMWhyQ3RRQzZPWkJFSi9Edz09Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K"""

# MCP Server Port
MCP_PORT = 44433
MCP_HOST = "api.ailinux.me"


def _decode_cert(b64_data: str) -> bytes:
    """Dekodiert Base64 Zertifikat"""
    return base64.b64decode(b64_data)


def get_ssl_context() -> ssl.SSLContext:
    """
    Erstellt SSL Context mit eingebetteten Zertifikaten.
    
    Returns:
        ssl.SSLContext für mTLS WebSocket-Verbindung zu Port 44433
    """
    # Temporäre Dateien für Zertifikate
    with tempfile.NamedTemporaryFile(mode="wb", suffix=".pem", delete=False) as f:
        f.write(_decode_cert(_CLIENT_CERT_B64))
        client_pem = f.name
    
    with tempfile.NamedTemporaryFile(mode="wb", suffix=".crt", delete=False) as f:
        f.write(_decode_cert(_CA_CERT_B64))
        ca_crt = f.name
    
    try:
        # SSL Context erstellen
        ctx = ssl.SSLContext(ssl.PROTOCOL_TLS_CLIENT)
        ctx.load_cert_chain(client_pem)
        ctx.load_verify_locations(ca_crt)
        ctx.check_hostname = True
        ctx.verify_mode = ssl.CERT_REQUIRED
        
        return ctx
    finally:
        # Temp-Dateien löschen
        try:
            os.unlink(client_pem)
            os.unlink(ca_crt)
        except:
            pass


def get_mcp_url() -> str:
    """Returns WebSocket URL für MCP Verbindung"""
    return f"wss://{MCP_HOST}:{MCP_PORT}/mcp"


def get_cert_info() -> dict:
    """Gibt Zertifikat-Info zurück (ohne private Daten)"""
    return {
        "common_name": "ailinux-client",
        "issuer": "AILinux MCP CA",
        "type": "mTLS Client Certificate",
        "port": MCP_PORT,
        "generated": "2025-12-27",
        "valid_until": "2035-12-25"
    }


# === QUICK TEST ===
if __name__ == "__main__":
    print("Testing embedded certificates...")
    ctx = get_ssl_context()
    print(f"SSL Context created: {ctx}")
    print(f"MCP URL: {get_mcp_url()}")
    print(f"Cert info: {get_cert_info()}")
    print("OK!")
